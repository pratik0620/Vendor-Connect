// Language translations for vendor dashboard
const translations = {
    en: {
        welcome: "Welcome",
        vendor_dashboard: "Vendor Dashboard",
        refresh: "Refresh",
        logout: "Logout",
        inventory_status: "Inventory Status",
        update_inventory: "Update Inventory",
        product: "Product",
        quantity: "Quantity",
        status: "Status",
        actions: "Actions",
        price_comparison: "Price Comparison",
        item: "Item",
        market_price: "Market Price",
        best_supplier: "Best Supplier",
        best_price: "Best Price",
        nearby_suppliers: "Nearby Suppliers",
        notifications: "Notifications",
        group_purchases: "Group Purchases",
        join: "Join",
        autopay_setup: "Autopay Setup",
        payment_methods: "Payment Methods",
        bank_transfer: "Bank Transfer",
        credit_card: "Credit Card",
        upi: "UPI",
        autopay_settings: "Autopay Settings",
        min_amount: "Minimum Order Amount",
        payment_day: "Payment Day",
        first_day: "First day of month",
        fifteenth_day: "15th of month",
        last_day: "Last day of month",
        low_stock: "Low Stock",
        ok_stock: "OK",
        order: "Order",
        distance: "Distance",
        view_products: "View Products",
        price_drop: "Price Drop",
        new_supplier_offer: "New Supplier Offer",
        govt_scheme: "Government Scheme",
        items_needed: "Items Needed",
        vendors_joined: "Vendors Joined",
        join_group: "Join Group",
        group_purchase_opportunity: "Group Purchase Opportunity",
        discount: "Discount",
        // Search translations
        search: "Search",
        search_placeholder: "Search suppliers, products, prices...",
        all_categories: "All Categories",
        suppliers: "Suppliers",
        products: "Products",
        prices: "Prices",
        inventory: "Inventory",
        all_locations: "All Locations",
        nearby: "Nearby",
        dadar: "Dadar",
        bandra: "Bandra",
        andheri: "Andheri",
        filters: "Filters",
        price_range: "Price Range",
        rating: "Rating",
        all_ratings: "All Ratings",
        above_4_5: "4.5+ Stars",
        above_4_0: "4.0+ Stars",
        above_3_5: "3.5+ Stars",
        distance: "Distance",
        any_distance: "Any Distance",
        within_1km: "Within 1km",
        within_3km: "Within 3km",
        within_5km: "Within 5km",
        sort_by: "Sort By",
        relevance: "Relevance",
        price_low_to_high: "Price: Low to High",
        price_high_to_low: "Price: High to Low",
        clear_filters: "Clear Filters",
        apply_filters: "Apply Filters",
        clear_search: "Clear Search",
        search_results: "Search Results",
        no_results_found: "No results found",
        search_suggestions: "Search Suggestions",
        // Cart translations
        cart: "Cart",
        shopping_cart: "Shopping Cart",
        subtotal: "Subtotal",
        delivery_fee: "Delivery Fee",
        tax: "Tax (5%)",
        total: "Total",
        save_for_later: "Save for Later",
        proceed_to_checkout: "Proceed to Checkout",
        saved_carts: "Saved Carts",
        add_to_cart: "Add to Cart",
        remove_from_cart: "Remove",
        quantity: "Quantity",
        item_total: "Item Total",
        empty_cart: "Your cart is empty",
        cart_empty_message: "Add some items to get started",
        cart_saved: "Cart saved successfully",
        cart_loaded: "Cart loaded successfully",
        item_added: "Item added to cart",
        item_removed: "Item removed from cart",
        checkout_success: "Order placed successfully",
        delivery_address: "Delivery Address",
        payment_method: "Payment Method",
        order_summary: "Order Summary",
        place_order: "Place Order",
        // Government Schemes translations
        government_schemes: "Government Schemes",
        schemes_subtitle: "Discover and apply for government support programs",
        filter_schemes: "Filter",
        scheme_category: "Category",
        all_categories: "All Categories",
        financial_support: "Financial Support",
        training_programs: "Training Programs",
        equipment_subsidy: "Equipment Subsidy",
        hygiene_certification: "Hygiene Certification",
        digital_adoption: "Digital Adoption",
        eligibility: "Eligibility",
        all_vendors: "All Vendors",
        new_vendors: "New Vendors",
        women_vendors: "Women Vendors",
        sc_st_vendors: "SC/ST Vendors",
        small_vendors: "Small Vendors",
        deadline: "Deadline",
        all_deadlines: "All Deadlines",
        urgent_deadlines: "Urgent (This Month)",
        soon_deadlines: "Soon (Next Month)",
        ongoing_schemes: "Ongoing Schemes",
        benefit_amount: "Benefit Amount",
        popularity: "Popularity",
        scheme_details: "Scheme Details",
        apply_now: "Apply Now",
        learn_more: "Learn More",
        save_scheme: "Save Scheme",
        scheme_benefits: "Benefits",
        scheme_eligibility: "Eligibility",
        scheme_deadline: "Application Deadline",
        scheme_amount: "Benefit Amount",
        scheme_duration: "Scheme Duration",
        scheme_contact: "Contact Information",
        scheme_website: "Official Website",
        scheme_documents: "Required Documents",
        scheme_process: "Application Process",
        scheme_status: "Status",
        scheme_active: "Active",
        scheme_urgent: "Urgent",
        scheme_ending: "Ending Soon",
        scheme_ongoing: "Ongoing",
        scheme_expired: "Expired",
        scheme_saved: "Scheme saved to favorites",
        scheme_applied: "Application submitted successfully",
        scheme_contact_info: "Contact Information",
        scheme_helpline: "Helpline",
        scheme_email: "Email",
        scheme_address: "Address",
        scheme_website_link: "Visit Website",
        scheme_download_form: "Download Form",
        scheme_online_apply: "Apply Online",
        scheme_offline_apply: "Apply Offline",
        scheme_track_application: "Track Application",
        scheme_application_id: "Application ID",
        scheme_application_status: "Application Status",
        scheme_application_date: "Application Date",
        scheme_application_tracking: "Track Your Application",
        saved_schemes: "Saved Schemes",
        find_suppliers_nearby: "Find and connect with suppliers in your area",
        my_location: "My Location",
        vegetables: "Vegetables",
        fruits: "Fruits",
        dairy: "Dairy",
        meat: "Meat",
        grains: "Grains",
        suppliers_list: "Suppliers List",
        contact_supplier: "Contact",
        view_products: "View Products",
        phone: "Phone",
        email: "Email",
        address: "Address",
        products: "Products",
        delivery_time: "Delivery Time",
        min_order: "Min Order",
        open_hours: "Open Hours",
        km_away: "km away",
        get_directions: "Get Directions"
    },
    hi: {
        welcome: "स्वागत है",
        vendor_dashboard: "विक्रेता डैशबोर्ड",
        refresh: "रीफ्रेश करें",
        logout: "लॉगआउट करें",
        inventory_status: "इन्वेंटरी स्थिति",
        update_inventory: "इन्वेंटरी अपडेट करें",
        product: "उत्पाद",
        quantity: "मात्रा",
        status: "स्थिति",
        actions: "क्रियाएँ",
        price_comparison: "मूल्य तुलना",
        item: "वस्तु",
        market_price: "बाजार मूल्य",
        best_supplier: "सर्वोत्तम आपूर्तिकर्ता",
        best_price: "सर्वोत्तम मूल्य",
        nearby_suppliers: "आस-पास के आपूर्तिकर्ता",
        notifications: "सूचनाएँ",
        group_purchases: "समूह खरीदारी",
        join: "शामिल हों",
        autopay_setup: "ऑटोपे सेटअप",
        payment_methods: "भुगतान विधि",
        bank_transfer: "बैंक ट्रांसफर",
        credit_card: "क्रेडिट कार्ड",
        upi: "यूपीआई",
        autopay_settings: "ऑटोपे सेटिंग्स",
        min_amount: "न्यूनतम ऑर्डर राशि",
        payment_day: "भुगतान दिन",
        first_day: "महीने का पहला दिन",
        fifteenth_day: "महीने का 15वां दिवस",
        last_day: "महीने का अंतिम दिवस",
        low_stock: "कम स्टॉक",
        ok_stock: "ठीक है",
        order: "ऑर्डर",
        distance: "दूरी",
        view_products: "उत्पाद देखें",
        price_drop: "मूल्य गिरावट",
        new_supplier_offer: "नए आपूर्तिकर्ता का प्रस्ताव",
        govt_scheme: "सरकारी योजना",
        items_needed: "आवश्यक वस्तुएँ",
        vendors_joined: "शामिल हुए विक्रेता",
        join_group: "समूह में शामिल हों",
        group_purchase_opportunity: "समूह खरीदारी का अवसर",
        discount: "छूट",
        // Search translations
        search: "खोजें",
        search_placeholder: "आपूर्तिकर्ता, उत्पाद, मूल्य खोजें...",
        all_categories: "सभी श्रेणियां",
        suppliers: "आपूर्तिकर्ता",
        products: "उत्पाद",
        prices: "मूल्य",
        inventory: "इन्वेंटरी",
        all_locations: "सभी स्थान",
        nearby: "आस-पास",
        dadar: "दादर",
        bandra: "बांद्रा",
        andheri: "अंधेरी",
        filters: "फ़िल्टर",
        price_range: "मूल्य सीमा",
        rating: "रेटिंग",
        all_ratings: "सभी रेटिंग",
        above_4_5: "4.5+ सितारे",
        above_4_0: "4.0+ सितारे",
        above_3_5: "3.5+ सितारे",
        distance: "दूरी",
        any_distance: "कोई भी दूरी",
        within_1km: "1 किमी के भीतर",
        within_3km: "3 किमी के भीतर",
        within_5km: "5 किमी के भीतर",
        sort_by: "क्रमबद्ध करें",
        relevance: "प्रासंगिकता",
        price_low_to_high: "मूल्य: कम से अधिक",
        price_high_to_low: "मूल्य: अधिक से कम",
        clear_filters: "फ़िल्टर साफ़ करें",
        apply_filters: "फ़िल्टर लागू करें",
        clear_search: "खोज साफ़ करें",
        search_results: "खोज परिणाम",
        no_results_found: "कोई परिणाम नहीं मिला",
        search_suggestions: "खोज सुझाव",
        // Cart translations
        cart: "कार्ट",
        shopping_cart: "खरीदारी का कार्ट",
        subtotal: "उप-कुल",
        delivery_fee: "वितरण शुल्क",
        tax: "कर (5%)",
        total: "कुल",
        save_for_later: "बाद में सहेजें",
        proceed_to_checkout: "चेकआउट पर जाएं",
        saved_carts: "सहेजे गए कार्ट",
        add_to_cart: "कार्ट में जोड़ें",
        remove_from_cart: "हटाएं",
        quantity: "मात्रा",
        item_total: "वस्तु कुल",
        empty_cart: "आपका कार्ट खाली है",
        cart_empty_message: "कुछ वस्तुएँ जोड़ें शुरू करें",
        cart_saved: "कार्ट सहेजने में सफल",
        cart_loaded: "कार्ट सहेजने में सफल",
        item_added: "वस्तु कार्ट में जोड़ी",
        item_removed: "वस्तु कार्ट से हटाई",
        checkout_success: "आदेश सफलतापूर्वक रखा गया",
        delivery_address: "वितरण पता",
        payment_method: "भुगतान विधि",
        order_summary: "आदेश सारांश",
        place_order: "आदेश रखें",
        // Government Schemes translations
        government_schemes: "सरकारी योजनाएँ",
        filter_schemes: "फ़िल्टर",
        scheme_category: "श्रेणी",
        all_categories: "सभी श्रेणियां",
        financial_support: "वित्तीय सहायता",
        training_programs: "प्रशिक्षण कार्यक्रम",
        equipment_subsidy: "उपकरण सहायता",
        hygiene_certification: "स्वास्थ्य प्रमाणन",
        digital_adoption: "डिजिटल सहायता",
        eligibility: "पालनहार",
        all_vendors: "सभी विक्रेता",
        new_vendors: "नए विक्रेता",
        women_vendors: "महिला विक्रेता",
        sc_st_vendors: "SC/ST विक्रेता",
        small_vendors: "छोटे विक्रेता",
        deadline: "अंतिम तिथि",
        all_deadlines: "सभी अंतिम तिथियां",
        urgent_deadlines: "तत्कालीन (इस महीने)",
        soon_deadlines: "जल्द आयेगी (अगले महीने)",
        ongoing_schemes: "चल रही योजनाएँ",
        benefit_amount: "लाभ राशि",
        popularity: "लोकप्रियता",
        scheme_details: "योजना विवरण",
        apply_now: "अभी आवेदन करें",
        learn_more: "अधिक जानें",
        save_scheme: "योजना सहेजें",
        scheme_benefits: "लाभ",
        scheme_eligibility: "पालनहार",
        scheme_deadline: "आवेदन अंतिम तिथि",
        scheme_amount: "लाभ राशि",
        scheme_duration: "योजना अवधि",
        scheme_contact: "संपर्क जानकारी",
        scheme_website: "आधिकारिक वेबसाइट",
        scheme_documents: "आवश्यक दस्तावेज़",
        scheme_process: "आवेदन प्रक्रिया",
        scheme_status: "स्थिति",
        scheme_active: "सक्रिय",
        scheme_urgent: "तत्कालीन",
        scheme_ending: "जल्द समाप्त होने वाली",
        scheme_ongoing: "चल रही",
        scheme_expired: "समाप्त हो गई",
        scheme_saved: "योजना सहेजने में सफल",
        scheme_applied: "आवेदन सफलतापूर्वक जमा कर दिया गया",
        scheme_contact_info: "संपर्क जानकारी",
        scheme_helpline: "सहायता लाइन",
        scheme_email: "ईमेल",
        scheme_address: "पता",
        scheme_website_link: "वेबसाइट देखें",
        scheme_download_form: "फॉर्म डाउनलोड करें",
        scheme_online_apply: "ऑनलाइन आवेदन",
        scheme_offline_apply: "ऑफलाइन आवेदन",
        scheme_track_application: "आवेदन ट्रैक करें",
        scheme_application_id: "आवेदन ID",
        scheme_application_status: "आवेदन स्थिति",
        scheme_application_date: "आवेदन तिथि",
        scheme_application_tracking: "अपना आवेदन ट्रैक करें",
        find_suppliers_nearby: "अपने क्षेत्र में आपूर्तिकर्ताओं को खोजें और जुड़ें",
        my_location: "मेरा स्थान",
        vegetables: "सब्जियां",
        fruits: "फल",
        dairy: "दूध",
        meat: "मांस",
        grains: "अनाज",
        suppliers_list: "आपूर्तिकर्ता सूची",
        contact_supplier: "संपर्क करें",
        view_products: "उत्पाद देखें",
        phone: "फोन",
        email: "ईमेल",
        address: "पत्ता",
        products: "उत्पादने",
        delivery_time: "डिलीवरी समय",
        min_order: "न्यूनतम ऑर्डर",
        open_hours: "खुलने का समय",
        km_away: "किमी दूर",
        get_directions: "दिशा मिळवा"
    },
    mr: {
        welcome: "स्वागत आहे",
        vendor_dashboard: "विक्रेता डॅशबोर्ड",
        refresh: "रीफ्रेश करा",
        logout: "लॉगआउट करा",
        inventory_status: "इन्वेंटरी स्थिती",
        update_inventory: "इन्वेंटरी अपडेट करा",
        product: "उत्पाद",
        quantity: "प्रमाण",
        status: "स्थिती",
        actions: "कृती",
        price_comparison: "किंमत तुलना",
        item: "वस्तू",
        market_price: "बाजारातील किंमत",
        best_supplier: "सर्वोत्तम पुरवठादार",
        best_price: "सर्वोत्तम किंमत",
        nearby_suppliers: "जवळचे पुरवठादार",
        notifications: "सूचना",
        group_purchases: "समूह खरेदी",
        join: "सामील व्हा",
        autopay_setup: "ऑटोपे सेटअप",
        payment_methods: "पेमेंट पद्धती",
        bank_transfer: "बँक ट्रान्सफर",
        credit_card: "क्रेडिट कार्ड",
        upi: "युपीआय",
        autopay_settings: "ऑटोपे सेटिंग्स",
        min_amount: "किमान ऑर्डर रक्कम",
        payment_day: "पेमेंट दिवस",
        first_day: "महिन्याचा पहिला दिवस",
        fifteenth_day: "महिन्याचा १५ वा दिवस",
        last_day: "महिन्याचा शेवटचा दिवस",
        low_stock: "कमी स्टॉक",
        ok_stock: "ठीक आहे",
        order: "ऑर्डर",
        distance: "अंतर",
        view_products: "उत्पादे पहा",
        price_drop: "किंमत कमी",
        new_supplier_offer: "नवीन पुरवठादार ऑफर",
        govt_scheme: "सरकारी योजना",
        items_needed: "आवश्यक वस्तू",
        vendors_joined: "सामील झालेले विक्रेते",
        join_group: "समूहात सामील व्हा",
        group_purchase_opportunity: "समूह खरेदी संधी",
        discount: "सवलत",
        // Search translations
        search: "शोधा",
        search_placeholder: "पुरवठादार, उत्पादने, किंमती शोधा...",
        all_categories: "सर्व श्रेणी",
        suppliers: "पुरवठादार",
        products: "उत्पादने",
        prices: "किंमती",
        inventory: "इन्व्हेंटरी",
        all_locations: "सर्व स्थाने",
        nearby: "जवळ",
        dadar: "दादर",
        bandra: "बांद्रा",
        andheri: "अंधेरी",
        filters: "फिल्टर",
        price_range: "किंमत श्रेणी",
        rating: "रेटिंग",
        all_ratings: "सर्व रेटिंग",
        above_4_5: "4.5+ तारे",
        above_4_0: "4.0+ तारे",
        above_3_5: "3.5+ तारे",
        distance: "अंतर",
        any_distance: "कोणतेही अंतर",
        within_1km: "1 किमी आत",
        within_3km: "3 किमी आत",
        within_5km: "5 किमी आत",
        sort_by: "क्रमवारी लावा",
        relevance: "संबंधितता",
        price_low_to_high: "किंमत: कमी ते जास्त",
        price_high_to_low: "किंमत: जास्त ते कमी",
        clear_filters: "फिल्टर साफ करा",
        apply_filters: "फिल्टर लागू करा",
        clear_search: "शोध साफ करा",
        search_results: "शोध निकाल",
        no_results_found: "कोणतेही निकाल सापडले नाहीत",
        search_suggestions: "शोध सूचना",
        // Cart translations
        cart: "कार्ट",
        shopping_cart: "खरीदारी का कार्ट",
        subtotal: "उप-कुल",
        delivery_fee: "वितरण शुल्क",
        tax: "कर (5%)",
        total: "कुल",
        save_for_later: "बाद में सहेजें",
        proceed_to_checkout: "चेकआउट पर जाएं",
        saved_carts: "सहेजे गए कार्ट",
        add_to_cart: "कार्ट में जोड़ें",
        remove_from_cart: "हटाएं",
        quantity: "मात्रा",
        item_total: "वस्तु कुल",
        empty_cart: "आपका कार्ट खाली है",
        cart_empty_message: "कुछ वस्तुएँ जोड़ें शुरू करें",
        cart_saved: "कार्ट सहेजने में सफल",
        cart_loaded: "कार्ट सहेजने में सफल",
        item_added: "वस्तु कार्ट में जोड़ी",
        item_removed: "वस्तु कार्ट से हटाई",
        checkout_success: "आदेश सफलतापूर्वक रखा गया",
        delivery_address: "वितरण पता",
        payment_method: "भुगतान विधि",
        order_summary: "आदेश सारांश",
        place_order: "आदेश रखें",
        // Government Schemes translations
        government_schemes: "सरकारी योजनाएँ",
        filter_schemes: "फ़िल्टर",
        scheme_category: "श्रेणी",
        all_categories: "सर्व श्रेणी",
        financial_support: "वित्तीय सहायता",
        training_programs: "प्रशिक्षण कार्यक्रम",
        equipment_subsidy: "उपकरण सहायता",
        hygiene_certification: "स्वास्थ्य प्रमाणन",
        digital_adoption: "डिजिटल सहायता",
        eligibility: "पालनहार",
        all_vendors: "सर्व विक्रेता",
        new_vendors: "नवीन विक्रेता",
        women_vendors: "महिला विक्रेता",
        sc_st_vendors: "SC/ST विक्रेता",
        small_vendors: "छोटे विक्रेता",
        deadline: "अंतिम तिथि",
        all_deadlines: "सभी अंतिम तिथियां",
        urgent_deadlines: "तत्कालीन (इस महीने)",
        soon_deadlines: "जल्द आयेगी (अगले महीने)",
        ongoing_schemes: "चल रही योजनाएँ",
        benefit_amount: "लाभ राशि",
        popularity: "लोकप्रियता",
        scheme_details: "योजना विवरण",
        apply_now: "अभी आवेदन करें",
        learn_more: "अधिक जानें",
        save_scheme: "योजना सहेजें",
        scheme_benefits: "लाभ",
        scheme_eligibility: "पालनहार",
        scheme_deadline: "आवेदन अंतिम तिथि",
        scheme_amount: "लाभ राशि",
        scheme_duration: "योजना अवधि",
        scheme_contact: "संपर्क जानकारी",
        scheme_website: "आधिकारिक वेबसाइट",
        scheme_documents: "आवश्यक दस्तावेज़",
        scheme_process: "आवेदन प्रक्रिया",
        scheme_status: "स्थिति",
        scheme_active: "सक्रिय",
        scheme_urgent: "तत्कालीन",
        scheme_ending: "जल्द समाप्त होने वाली",
        scheme_ongoing: "चल रही",
        scheme_expired: "समाप्त हो गई",
        scheme_saved: "योजना सहेजने में सफल",
        scheme_applied: "आवेदन सफलतापूर्वक जमा कर दिया गया",
        scheme_contact_info: "संपर्क जानकारी",
        scheme_helpline: "सहायता लाइन",
        scheme_email: "ईमेल",
        scheme_address: "पता",
        scheme_website_link: "वेबसाइट देखें",
        scheme_download_form: "फॉर्म डाउनलोड करें",
        scheme_online_apply: "ऑनलाइन आवेदन",
        scheme_offline_apply: "ऑफलाइन आवेदन",
        scheme_track_application: "आवेदन ट्रैक करें",
        scheme_application_id: "आवेदन ID",
        scheme_application_status: "आवेदन स्थिति",
        scheme_application_date: "आवेदन तिथि",
        scheme_application_tracking: "अपना आवेदन ट्रैक करें",
        find_suppliers_nearby: "तुमच्या क्षेत्रातील पुरवठादार शोधा आणि जोडा",
        my_location: "माझे स्थान",
        vegetables: "भाजीपाला",
        fruits: "फळे",
        dairy: "दूध",
        meat: "मांस",
        grains: "तृणधान्ये",
        suppliers_list: "पुरवठादार यादी",
        contact_supplier: "संपर्क साधा",
        view_products: "उत्पादने पहा",
        phone: "फोन",
        email: "ईमेल",
        address: "पत्ता",
        products: "उत्पादने",
        delivery_time: "वितरण वेळ",
        min_order: "किमान ऑर्डर",
        open_hours: "उघडण्याची वेळ",
        km_away: "किमी दूर",
        get_directions: "दिशा मिळवा"
    }
};

// Mock data for vendor dashboard
const mockData = {
    vendors: [
        { id: 1, name: "Rajesh", business: "Rajesh Pav Bhaji", location: "Dadar" },
        { id: 2, name: "Anita", business: "Anita's Chaat Corner", location: "Bandra" },
        { id: 3, name: "Prakash", business: "Prakash Vada Pav", location: "Andheri" }
    ],
    suppliers: [
        {
            id: 1,
            name: "Ganesh Trading Co.",
            location: "Dadar",
            distance: "1.2 km",
            rating: 4.7,
            category: "Vegetables, Spices",
            products: [
                { name: "Potato", price: 35, freshness: "Fresh", hygieneRating: 5 },
                { name: "Tomato", price: 60, freshness: "Fresh", hygieneRating: 5 },
                { name: "Onion", price: 40, freshness: "Good", hygieneRating: 4 }
            ]
        },
        {
            id: 2,
            name: "Mumbai Masala Supply",
            location: "Andheri",
            distance: "3.5 km",
            rating: 4.3,
            category: "Spices, Flours",
            products: [
                { name: "Red Chili Powder", price: 320, freshness: "Good", hygieneRating: 4 },
                { name: "Turmeric Powder", price: 280, freshness: "Good", hygieneRating: 4 },
                { name: "Coriander Powder", price: 220, freshness: "Regular", hygieneRating: 3 }
            ]
        },
        {
            id: 3,
            name: "Fresh Veggie Hub",
            location: "Bandra",
            distance: "2.8 km",
            rating: 4.5,
            category: "Vegetables, Fruits",
            products: [
                { name: "Capsicum", price: 70, freshness: "Fresh", hygieneRating: 5 },
                { name: "Cauliflower", price: 50, freshness: "Fresh", hygieneRating: 4 },
                { name: "Peas", price: 120, freshness: "Fresh", hygieneRating: 5 }
            ]
        }
    ],
    vendorInventory: [
        { name: "Potato", quantity: 8, status: "low" },
        { name: "Tomato", quantity: 12, status: "ok" },
        { name: "Onion", quantity: 15, status: "ok" },
        { name: "Butter", quantity: 5, status: "low" },
        { name: "Pav", quantity: 50, status: "ok" },
        { name: "Coriander", quantity: 2, status: "low" }
    ],
    priceComparison: [
        { item: "Potato", marketPrice: 40, bestSupplier: "Ganesh Trading Co.", bestPrice: 35 },
        { item: "Tomato", marketPrice: 70, bestSupplier: "Fresh Veggie Hub", bestPrice: 65 },
        { item: "Onion", marketPrice: 45, bestSupplier: "Ganesh Trading Co.", bestPrice: 40 },
        { item: "Red Chili Powder", marketPrice: 350, bestSupplier: "Mumbai Masala Supply", bestPrice: 320 },
        { item: "Butter", marketPrice: 580, bestSupplier: "Amul Distributor", bestPrice: 560 }
    ],
    vendorNotifications: [
        { type: "price_drop", title: "Price Drop", message: "Potato prices reduced by 10% at Ganesh Trading Co.", time: "1 hour ago" },
        { type: "new_supplier", title: "New Supplier", message: "New supplier 'Fresh Produce' added near your location.", time: "3 hours ago" },
        { type: "govt_scheme", title: "Govt. Scheme", message: "New subsidy available for street food vendors. Apply before 30th.", time: "1 day ago" }
    ],
    groupPurchases: [
        {
            id: 1,
            items: ["Potato", "Onion", "Tomato"],
            totalQuantity: 150,
            bestSupplier: "Ganesh Trading Co.",
            discount: "15%",
            vendorsJoined: 5,
            deadline: "Today, 6 PM"
        },
        {
            id: 2,
            items: ["Red Chili Powder", "Turmeric Powder", "Garam Masala"],
            totalQuantity: 30,
            bestSupplier: "Mumbai Masala Supply",
            discount: "10%",
            vendorsJoined: 8,
            deadline: "Tomorrow, 12 PM"
        }
    ]
};

// Search history for better UX
let searchHistory = JSON.parse(localStorage.getItem("vendorconnect_search_history") || "[]");

// Cart data
let cart = JSON.parse(localStorage.getItem("vendorconnect_cart") || "[]");
let savedCarts = JSON.parse(localStorage.getItem("vendorconnect_saved_carts") || "[]");

// Current language
let currentLang = "en";

// Government schemes data
const governmentSchemes = [
    {
        id: 1,
        title: "PM Street Vendor's AtmaNirbhar Nidhi (PM SVANidhi)",
        category: "financial",
        description: "A special micro-credit facility for street vendors to resume their livelihoods that were adversely affected due to COVID-19.",
        benefits: [
            "Working capital loan up to ₹10,000",
            "Interest subsidy @ 7%",
            "Digital transactions incentive",
            "No collateral required"
        ],
        eligibility: ["new", "small"],
        amount: "₹10,000",
        duration: "12 months",
        deadline: "2024-12-31",
        status: "active",
        contact: {
            helpline: "1800-XXX-XXXX",
            email: "pm-svanidhi@gov.in",
            website: "https://pmsvanidhi.mohua.gov.in"
        },
        documents: [
            "Aadhaar Card",
            "Vendor ID Card",
            "Bank Account Details",
            "Passport Size Photo"
        ],
        process: "Online application through PM SVANidhi portal",
        popularity: 95
    },
    {
        id: 2,
        title: "Food Safety Training and Certification",
        category: "hygiene",
        description: "Free training and certification program for street food vendors to ensure food safety standards and hygiene practices.",
        benefits: [
            "Free training program",
            "FSSAI certification",
            "Hygiene kit worth ₹2,000",
            "Better customer trust"
        ],
        eligibility: ["all"],
        amount: "Free",
        duration: "3 months",
        deadline: "2024-06-30",
        status: "urgent",
        contact: {
            helpline: "1800-XXX-XXXX",
            email: "fssai@gov.in",
            website: "https://fssai.gov.in"
        },
        documents: [
            "Aadhaar Card",
            "Vendor Registration",
            "Educational Certificate",
            "Address Proof"
        ],
        process: "Register online and attend training sessions",
        popularity: 88
    },
    {
        id: 3,
        title: "Digital Payment Adoption Scheme",
        category: "digital",
        description: "Incentive scheme to encourage street vendors to adopt digital payment methods and improve their business efficiency.",
        benefits: [
            "₹1,000 cashback on first 100 transactions",
            "Free QR code setup",
            "Digital transaction training",
            "Monthly incentive of ₹100"
        ],
        eligibility: ["all"],
        amount: "₹1,000 + Monthly ₹100",
        duration: "Ongoing",
        deadline: "2024-12-31",
        status: "active",
        contact: {
            helpline: "1800-XXX-XXXX",
            email: "digitalpay@gov.in",
            website: "https://digitalindia.gov.in"
        },
        documents: [
            "Aadhaar Card",
            "Bank Account",
            "Mobile Number",
            "Vendor ID"
        ],
        process: "Register through Digital India portal",
        popularity: 92
    },
    {
        id: 4,
        title: "Equipment and Infrastructure Support",
        category: "equipment",
        description: "Subsidy scheme for purchasing modern equipment and improving infrastructure for street food vendors.",
        benefits: [
            "50% subsidy on equipment up to ₹50,000",
            "Modern cooking equipment",
            "Hygiene infrastructure",
            "Safety equipment"
        ],
        eligibility: ["women", "sc_st"],
        amount: "Up to ₹25,000",
        duration: "6 months",
        deadline: "2024-08-31",
        status: "ending",
        contact: {
            helpline: "1800-XXX-XXXX",
            email: "equipment@gov.in",
            website: "https://msme.gov.in"
        },
        documents: [
            "Aadhaar Card",
            "Caste Certificate (if applicable)",
            "Vendor Registration",
            "Equipment Quotation"
        ],
        process: "Apply through MSME portal with quotations",
        popularity: 85
    },
    {
        id: 5,
        title: "Business Skills Training Program",
        category: "training",
        description: "Comprehensive training program covering business management, customer service, and financial literacy for street vendors.",
        benefits: [
            "Free business training",
            "Certificate of completion",
            "Networking opportunities",
            "Business mentorship"
        ],
        eligibility: ["new", "women"],
        amount: "Free",
        duration: "2 months",
        deadline: "2024-07-15",
        status: "urgent",
        contact: {
            helpline: "1800-XXX-XXXX",
            email: "training@gov.in",
            website: "https://skillindia.gov.in"
        },
        documents: [
            "Aadhaar Card",
            "Educational Certificate",
            "Vendor Registration",
            "Motivation Letter"
        ],
        process: "Online registration and interview",
        popularity: 78
    },
    {
        id: 6,
        title: "Health Insurance for Street Vendors",
        category: "financial",
        description: "Comprehensive health insurance coverage for street vendors and their families with minimal premium contribution.",
        benefits: [
            "Health coverage up to ₹5 lakhs",
            "Family coverage included",
            "Cashless hospitalization",
            "Preventive health checkup"
        ],
        eligibility: ["all"],
        amount: "₹500/year premium",
        duration: "1 year (renewable)",
        deadline: "2024-12-31",
        status: "active",
        contact: {
            helpline: "1800-XXX-XXXX",
            email: "health@gov.in",
            website: "https://pmjay.gov.in"
        },
        documents: [
            "Aadhaar Card",
            "Family Details",
            "Bank Account",
            "Medical History"
        ],
        process: "Apply through PM-JAY portal",
        popularity: 90
    }
];

let savedSchemes = JSON.parse(localStorage.getItem("vendorconnect_saved_schemes") || "[]");

// Initialize the vendor dashboard
$(document).ready(function () {
    // Check authentication first
    checkAuthentication();

    // Setup language switcher
    setupLanguageSwitcher();

    // Setup event listeners
    setupEventListeners();

    // Initialize Bootstrap components
    initBootstrapComponents();
});

// Get user ID from URL
function getUserIdFromUrl() {
    const pathParts = window.location.pathname.split('/');
    // URL format: /vendor/userId/dashboard
    if (pathParts.length >= 3 && pathParts[1] === 'vendor') {
        return pathParts[2];
    }
    return null;
}

// Check authentication and load user data
function checkAuthentication() {
    const userData = JSON.parse(localStorage.getItem("vendorconnect_user"));
    const urlUserId = getUserIdFromUrl();
    
    if (!userData || userData.role !== "vendor") {
        // No user data or wrong role, redirect to login page
        window.location.href = "/login";
        return;
    }

    // Load vendor data based on URL user ID
    loadVendorData(urlUserId);
}

// Load vendor data from API
async function loadVendorData(vendorId) {
    try {
        const response = await fetch(`/api/vendor/${vendorId}/info`);
        if (response.ok) {
            const vendorData = await response.json();
            // Priority: name from Vendor table, then business_name from VendorInfo, then default
            const displayName = vendorData.name || vendorData.business_name || 'Vendor';
            showVendorDashboard(displayName, vendorId);
        } else {
            // If vendor not found, show with generic name
            showVendorDashboard('Vendor', vendorId);
        }
    } catch (error) {
        console.error('Error loading vendor data:', error);
        showVendorDashboard('Vendor', vendorId);
    }
}

// Language switcher function
function setupLanguageSwitcher() {
    $(".lang-btn").click(function () {
        currentLang = $(this).data("lang");
        $(".lang-btn").removeClass("active");
        $(this).addClass("active");
        updateLanguage();

        // Save language preference
        localStorage.setItem("vendorconnect_lang", currentLang);
    });

    // Load saved language preference
    const savedLang = localStorage.getItem("vendorconnect_lang");
    if (savedLang && translations[savedLang]) {
        currentLang = savedLang;
        $(`.lang-btn[data-lang="${currentLang}"]`).click();
    }
}

// Update all text content based on selected language
function updateLanguage() {
    $("[data-i18n]").each(function () {
        const key = $(this).data("i18n");
        if (translations[currentLang] && translations[currentLang][key]) {
            $(this).text(translations[currentLang][key]);
        }
    });
    
    // Update placeholder text for search input
    $("[data-i18n-placeholder]").each(function () {
        const key = $(this).data("i18n-placeholder");
        if (translations[currentLang] && translations[currentLang][key]) {
            $(this).attr("placeholder", translations[currentLang][key]);
        }
    });
}

// Setup event listeners
function setupEventListeners() {
    // Logout button
    $("#logout-btn").click(function () {
        localStorage.removeItem("vendorconnect_user");
        window.location.href = "login.html";
    });

    // Refresh data button
    $("#refresh-data").click(function () {
        location.reload();
    });

    // Autopay slider value display
    $("#min-amount").on("input", function () {
        $("#min-amount-value").text(`₹${$(this).val()}`);
    });

    // Search functionality
    setupSearchEventListeners();
    
    // Cart functionality
    setupCartEventListeners();
    
    // Government schemes functionality
    setupSchemesEventListeners();
    
    // Enhanced suppliers functionality
    setupSuppliersEventListeners();
}

// Setup search event listeners
function setupSearchEventListeners() {
    // Search button click
    $("#search-btn").click(function() {
        performSearch();
    });

    // Search input enter key
    $("#vendor-search").on("keypress", function(e) {
        if (e.which === 13) {
            performSearch();
        }
    });

    // Advanced search toggle
    $("#advanced-search-toggle").click(function() {
        const panel = $("#advanced-search-panel");
        if (panel.is(":visible")) {
            panel.slideUp(300);
            $(this).removeClass("btn-primary").addClass("btn-outline-secondary");
        } else {
            panel.slideDown(300);
            $(this).removeClass("btn-outline-secondary").addClass("btn-primary");
        }
    });

    // Apply filters button
    $("#apply-filters").click(function() {
        performSearch();
    });

    // Clear filters button
    $("#clear-filters").click(function() {
        clearAdvancedFilters();
    });

    // Clear search button
    $("#clear-search").click(function() {
        clearSearch();
    });

    // Search input for suggestions
    $("#vendor-search").on("input", function() {
        const query = $(this).val().trim();
        if (query.length >= 2) {
            showSearchSuggestions(query);
        } else {
            hideSearchSuggestions();
        }
    });

    // Hide suggestions when clicking outside
    $(document).on("click", function(e) {
        if (!$(e.target).closest(".search-wrapper").length) {
            hideSearchSuggestions();
        }
    });
}

// Perform search
function performSearch() {
    const query = $("#vendor-search").val().trim();
    const category = $("#search-category").val();
    const location = $("#search-location").val();
    
    if (!query) {
        showAlert("Please enter a search term", "warning");
        return;
    }

    // Save to search history
    saveToSearchHistory(query);

    // Show loading state
    $("#search-btn").addClass("search-loading").prop("disabled", true);
    
    // Simulate search delay
    setTimeout(() => {
        const results = searchData(query, category, location);
        displaySearchResults(results, query);
        $("#search-btn").removeClass("search-loading").prop("disabled", false);
    }, 500);
}

// Search data function
function searchData(query, category, location) {
    const results = {
        suppliers: [],
        products: [],
        prices: [],
        inventory: []
    };

    const searchTerm = query.toLowerCase();

    // Search suppliers
    if (category === "all" || category === "suppliers") {
        mockData.suppliers.forEach(supplier => {
            if (supplier.name.toLowerCase().includes(searchTerm) ||
                supplier.category.toLowerCase().includes(searchTerm) ||
                supplier.location.toLowerCase().includes(searchTerm)) {
                
                // Apply location filter
                if (location === "all" || 
                    (location === "nearby" && parseFloat(supplier.distance) <= 3) ||
                    supplier.location.toLowerCase().includes(location)) {
                    results.suppliers.push(supplier);
                }
            }
        });
    }

    // Search products
    if (category === "all" || category === "products") {
        mockData.suppliers.forEach(supplier => {
            supplier.products.forEach(product => {
                if (product.name.toLowerCase().includes(searchTerm)) {
                    results.products.push({
                        ...product,
                        supplier: supplier.name,
                        supplierLocation: supplier.location,
                        supplierDistance: supplier.distance
                    });
                }
            });
        });
    }

    // Search prices
    if (category === "all" || category === "prices") {
        mockData.priceComparison.forEach(item => {
            if (item.item.toLowerCase().includes(searchTerm) ||
                item.bestSupplier.toLowerCase().includes(searchTerm)) {
                results.prices.push(item);
            }
        });
    }

    // Search inventory
    if (category === "all" || category === "inventory") {
        mockData.vendorInventory.forEach(item => {
            if (item.name.toLowerCase().includes(searchTerm)) {
                results.inventory.push(item);
            }
        });
    }

    return results;
}

// Display search results
function displaySearchResults(results, query) {
    const totalResults = results.suppliers.length + results.products.length + 
                        results.prices.length + results.inventory.length;

    if (totalResults === 0) {
        showAlert(translations[currentLang].no_results_found, "info");
        return;
    }

    // Show results summary with better styling
    $("#results-count").html(`
        <i class="fas fa-search me-2"></i>
        <strong>${totalResults}</strong> results found for "<span class="search-highlight">${query}</span>"
    `);
    $("#search-results-summary").show();

    // Add visual feedback for search results
    $(".card").addClass("search-active");
    
    // Update suppliers list with search results
    if (results.suppliers.length > 0) {
        updateSuppliersList(results.suppliers, query);
        $(`[data-i18n="nearby_suppliers"]`).html(`${translations[currentLang].nearby_suppliers} <span class="badge bg-primary">${results.suppliers.length}</span>`);
    }

    // Update price comparison with search results
    if (results.prices.length > 0) {
        updatePriceComparison(results.prices, query);
        $(`[data-i18n="price_comparison"]`).html(`${translations[currentLang].price_comparison} <span class="badge bg-success">${results.prices.length}</span>`);
    }

    // Show product results in a dedicated section
    if (results.products.length > 0) {
        showProductResults(results.products, query);
    }

    // Show inventory results
    if (results.inventory.length > 0) {
        updateInventoryList(results.inventory, query);
        $(`[data-i18n="inventory_status"]`).html(`${translations[currentLang].inventory_status} <span class="badge bg-warning">${results.inventory.length}</span>`);
    }

    // Scroll to first result
    $('html, body').animate({
        scrollTop: $(".search-result").first().offset().top - 100
    }, 500);
}

// Update suppliers list with search results
function updateSuppliersList(suppliers, query) {
    const suppliersList = $("#suppliers-list");
    suppliersList.empty();

    suppliers.forEach(supplier => {
        const starsHTML = getStarsHTML(supplier.rating);
        const highlightedName = highlightSearchTerm(supplier.name, query);

        suppliersList.append(`
            <div class="col-md-6 mb-3">
                <div class="supplier-item p-3 bg-white rounded search-result">
                    <h5>${highlightedName}</h5>
                    <div class="d-flex align-items-center mb-2">
                        <div class="stars me-2">${starsHTML}</div>
                        <span>${supplier.rating}</span>
                    </div>
                    <p class="mb-1"><i class="fas fa-map-marker-alt me-2"></i> ${supplier.location} (${supplier.distance})</p>
                    <p class="mb-2"><i class="fas fa-tag me-2"></i> ${supplier.category}</p>
                    <button class="btn btn-sm btn-outline-primary me-2">
                        <i class="fas fa-eye me-1"></i> ${translations[currentLang].view_products}
                    </button>
                    <button class="add-to-cart-btn" onclick="addToCart({
                        id: 'supp_${supplier.id}',
                        name: '${supplier.name} Package',
                        price: ${Math.floor(Math.random() * 200) + 100},
                        supplier: '${supplier.name}'
                    })">
                        <i class="fas fa-cart-plus"></i>
                        ${translations[currentLang].add_to_cart}
                    </button>
                </div>
            </div>
        `);
    });
}

// Update price comparison with search results
function updatePriceComparison(prices, query) {
    const priceTable = $("#price-comparison-table tbody");
    priceTable.empty();

    prices.forEach(item => {
        const savings = item.marketPrice - item.bestPrice;
        const savingsPercent = Math.round((savings / item.marketPrice) * 100);
        const highlightedItem = highlightSearchTerm(item.item, query);
        const highlightedSupplier = highlightSearchTerm(item.bestSupplier, query);

        priceTable.append(`
            <tr class="search-result">
                <td>${highlightedItem}</td>
                <td>₹${item.marketPrice}</td>
                <td>${highlightedSupplier}</td>
                <td>₹${item.bestPrice} <span class="text-success">(-${savingsPercent}%)</span></td>
            </tr>
        `);
    });
}

// Show product results
function showProductResults(products, query) {
    let productsHTML = `
        <div class="card mt-3">
            <div class="card-header">
                <h5><i class="fas fa-box me-2"></i>${translations[currentLang].products} (${products.length})</h5>
            </div>
            <div class="card-body">
                <div class="row">
    `;

    products.forEach(product => {
        const highlightedName = highlightSearchTerm(product.name, query);
        const highlightedSupplier = highlightSearchTerm(product.supplier, query);

        productsHTML += `
            <div class="col-md-6 mb-3">
                <div class="product-item p-3 border rounded">
                    <h6>${highlightedName}</h6>
                    <p class="mb-1"><strong>${translations[currentLang].best_supplier}:</strong> ${highlightedSupplier}</p>
                    <p class="mb-1"><strong>${translations[currentLang].best_price}:</strong> ₹${product.price}</p>
                    <p class="mb-1"><strong>${translations[currentLang].distance}:</strong> ${product.supplierDistance}</p>
                    <div class="d-flex align-items-center justify-content-between">
                        <div>
                            <span class="badge bg-success">${product.freshness}</span>
                            <span class="badge bg-info ms-1">${product.hygieneRating}/5</span>
                        </div>
                        <button class="add-to-cart-btn" onclick="addToCart({
                            id: 'prod_${product.name.toLowerCase().replace(/\s+/g, '_')}',
                            name: '${product.name}',
                            price: ${product.price},
                            supplier: '${product.supplier}'
                        })">
                            <i class="fas fa-cart-plus"></i>
                            ${translations[currentLang].add_to_cart}
                        </button>
                    </div>
                </div>
            </div>
        `;
    });

    productsHTML += `
                </div>
            </div>
        </div>
    `;

    // Insert after suppliers list
    $("#suppliers-list").parent().parent().after(productsHTML);
}

// Update inventory list with search results
function updateInventoryList(inventory, query) {
    const inventoryTable = $("#vendor-inventory-table tbody");
    inventoryTable.empty();

    inventory.forEach(item => {
        const statusClass = item.status === "low" ? "stock-low" : "stock-ok";
        const statusText = item.status === "low" ?
            translations[currentLang].low_stock :
            translations[currentLang].ok_stock;
        const highlightedName = highlightSearchTerm(item.name, query);

        inventoryTable.append(`
            <tr class="search-result">
                <td>${highlightedName}</td>
                <td>${item.quantity} kg</td>
                <td><span class="${statusClass}">${statusText}</span></td>
                <td>
                    <button class="btn btn-sm btn-primary">
                        ${translations[currentLang].order}
                    </button>
                </td>
            </tr>
        `);
    });
}

// Highlight search terms
function highlightSearchTerm(text, query) {
    if (!query) return text;
    const regex = new RegExp(`(${query})`, 'gi');
    return text.replace(regex, '<span class="search-highlight">$1</span>');
}

// Show search suggestions
function showSearchSuggestions(query) {
    const suggestions = generateSearchSuggestions(query);
    
    if (suggestions.length === 0) {
        hideSearchSuggestions();
        return;
    }

    let suggestionsHTML = '<div class="search-suggestions">';
    suggestions.forEach(suggestion => {
        suggestionsHTML += `
            <div class="search-suggestion-item" data-suggestion="${suggestion.text}">
                <i class="fas ${suggestion.icon} search-suggestion-icon"></i>
                <span class="search-suggestion-text">${suggestion.text}</span>
                <span class="search-suggestion-category">${suggestion.category}</span>
            </div>
        `;
    });
    suggestionsHTML += '</div>';

    // Remove existing suggestions and add new ones
    $(".search-suggestions").remove();
    $(".search-wrapper").append(suggestionsHTML);
    $(".search-suggestions").show();

    // Add click handlers for suggestions
    $(".search-suggestion-item").click(function() {
        const suggestion = $(this).data("suggestion");
        $("#vendor-search").val(suggestion);
        hideSearchSuggestions();
        performSearch();
    });
}

// Generate search suggestions
function generateSearchSuggestions(query) {
    const suggestions = [];
    const searchTerm = query.toLowerCase();

    // Add search history suggestions first
    searchHistory.forEach(historyItem => {
        if (historyItem.toLowerCase().includes(searchTerm) && !suggestions.some(s => s.text === historyItem)) {
            suggestions.push({
                text: historyItem,
                category: "Recent",
                icon: "fa-history"
            });
        }
    });

    // Supplier suggestions
    mockData.suppliers.forEach(supplier => {
        if (supplier.name.toLowerCase().includes(searchTerm) && !suggestions.some(s => s.text === supplier.name)) {
            suggestions.push({
                text: supplier.name,
                category: "Supplier",
                icon: "fa-store"
            });
        }
    });

    // Product suggestions
    mockData.suppliers.forEach(supplier => {
        supplier.products.forEach(product => {
            if (product.name.toLowerCase().includes(searchTerm) && !suggestions.some(s => s.text === product.name)) {
                suggestions.push({
                    text: product.name,
                    category: "Product",
                    icon: "fa-box"
                });
            }
        });
    });

    // Price comparison suggestions
    mockData.priceComparison.forEach(item => {
        if (item.item.toLowerCase().includes(searchTerm) && !suggestions.some(s => s.text === item.item)) {
            suggestions.push({
                text: item.item,
                category: "Price",
                icon: "fa-tags"
            });
        }
    });

    // Return unique suggestions (max 8)
    return suggestions.slice(0, 8);
}

// Hide search suggestions
function hideSearchSuggestions() {
    $(".search-suggestions").remove();
}

// Clear advanced filters
function clearAdvancedFilters() {
    $("#min-price").val("");
    $("#max-price").val("");
    $("#rating-filter").val("all");
    $("#distance-filter").val("all");
    $("#sort-by").val("relevance");
}

// Clear search
function clearSearch() {
    $("#vendor-search").val("");
    $("#search-results-summary").hide();
    $(".search-result").removeClass("search-result");
    $(".card").removeClass("search-active");
    hideSearchSuggestions();
    
    // Reset card headers to original text
    $(`[data-i18n="nearby_suppliers"]`).text(translations[currentLang].nearby_suppliers);
    $(`[data-i18n="price_comparison"]`).text(translations[currentLang].price_comparison);
    $(`[data-i18n="inventory_status"]`).text(translations[currentLang].inventory_status);
    
    // Remove any product results cards
    $(".card").has(".product-item").remove();
    
    // Reload original data
    loadVendorInventory();
    loadPriceComparison();
    loadSuppliersList();
}

// Save search to history
function saveToSearchHistory(query) {
    // Remove if already exists
    searchHistory = searchHistory.filter(item => item !== query);
    
    // Add to beginning
    searchHistory.unshift(query);
    
    // Keep only last 10 searches
    searchHistory = searchHistory.slice(0, 10);
    
    // Save to localStorage
    localStorage.setItem("vendorconnect_search_history", JSON.stringify(searchHistory));
}

// Show alert function
function showAlert(message, type = "info") {
    const alertHTML = `
        <div class="alert alert-${type} alert-dismissible fade show" role="alert">
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    `;
    
    // Insert alert at the top of the dashboard
    $("#vendor-dashboard").prepend(alertHTML);
    
    // Auto-dismiss after 5 seconds
    setTimeout(() => {
        $(".alert").alert("close");
    }, 5000);
}

// Setup cart event listeners
function setupCartEventListeners() {
    // Cart toggle
    $("#cart-toggle").click(function() {
        toggleCart();
    });

    // Cart close
    $("#cart-close").click(function() {
        closeCart();
    });

    // Cart overlay click
    $("#cart-overlay").click(function() {
        closeCart();
    });

    // Save cart
    $("#save-cart").click(function() {
        saveCart();
    });

    // Checkout
    $("#checkout-btn").click(function() {
        proceedToCheckout();
    });

    // Update cart count on page load
    updateCartCount();
}

// Toggle cart panel
function toggleCart() {
    const cartPanel = $("#cart-panel");
    const cartOverlay = $("#cart-overlay");
    
    if (cartPanel.hasClass("active")) {
        closeCart();
    } else {
        openCart();
    }
}

// Open cart panel
function openCart() {
    $("#cart-panel").addClass("active");
    $("#cart-overlay").addClass("active");
    loadCartItems();
    updateCartSummary();
}

// Close cart panel
function closeCart() {
    $("#cart-panel").removeClass("active");
    $("#cart-overlay").removeClass("active");
}

// Load cart items
function loadCartItems() {
    const cartItemsContainer = $("#cart-items");
    
    if (cart.length === 0) {
        cartItemsContainer.html(`
            <div class="empty-cart">
                <i class="fas fa-shopping-cart"></i>
                <h6>${translations[currentLang].empty_cart}</h6>
                <p>${translations[currentLang].cart_empty_message}</p>
            </div>
        `);
        return;
    }

    let cartHTML = "";
    cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        cartHTML += `
            <div class="cart-item" data-item-id="${item.id}">
                <div class="cart-item-header">
                    <div>
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-supplier">${item.supplier}</div>
                        <div class="cart-item-price">₹${item.price}/kg</div>
                    </div>
                    <button class="cart-item-remove" onclick="removeFromCart(${index})">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="cart-item-controls">
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="updateQuantity(${index}, -1)" ${item.quantity <= 1 ? 'disabled' : ''}>
                            <i class="fas fa-minus"></i>
                        </button>
                        <span class="quantity-display">${item.quantity} kg</span>
                        <button class="quantity-btn" onclick="updateQuantity(${index}, 1)">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="cart-item-total">₹${itemTotal.toFixed(2)}</div>
                </div>
            </div>
        `;
    });
    
    cartItemsContainer.html(cartHTML);
}

// Update cart summary
function updateCartSummary() {
    const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const deliveryFee = subtotal > 500 ? 0 : 50; // Free delivery above ₹500
    const tax = subtotal * 0.05; // 5% tax
    const total = subtotal + deliveryFee + tax;

    $("#cart-subtotal").text(`₹${subtotal.toFixed(2)}`);
    $("#cart-delivery").text(`₹${deliveryFee.toFixed(2)}`);
    $("#cart-tax").text(`₹${tax.toFixed(2)}`);
    $("#cart-total").text(`₹${total.toFixed(2)}`);
}

// Update cart count
function updateCartCount() {
    const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
    $("#cart-count").text(itemCount);
    
    // Hide badge if cart is empty
    if (itemCount === 0) {
        $("#cart-count").hide();
    } else {
        $("#cart-count").show();
    }
}

// Add item to cart
function addToCart(item) {
    // Check if item already exists in cart
    const existingItemIndex = cart.findIndex(cartItem => cartItem.id === item.id);
    
    if (existingItemIndex !== -1) {
        // Update quantity
        cart[existingItemIndex].quantity += 1;
    } else {
        // Add new item
        cart.push({
            id: item.id,
            name: item.name,
            price: item.price,
            supplier: item.supplier,
            quantity: 1
        });
    }
    
    // Save to localStorage
    localStorage.setItem("vendorconnect_cart", JSON.stringify(cart));
    
    // Update UI
    updateCartCount();
    
    // Show success message
    showAlert(translations[currentLang].item_added, "success");
}

// Remove item from cart
function removeFromCart(index) {
    cart.splice(index, 1);
    localStorage.setItem("vendorconnect_cart", JSON.stringify(cart));
    
    updateCartCount();
    loadCartItems();
    updateCartSummary();
    
    showAlert(translations[currentLang].item_removed, "info");
}

// Update item quantity
function updateQuantity(index, change) {
    const newQuantity = cart[index].quantity + change;
    
    if (newQuantity <= 0) {
        removeFromCart(index);
        return;
    }
    
    cart[index].quantity = newQuantity;
    localStorage.setItem("vendorconnect_cart", JSON.stringify(cart));
    
    updateCartCount();
    loadCartItems();
    updateCartSummary();
}

// Save cart for later
function saveCart() {
    if (cart.length === 0) {
        showAlert("Cart is empty", "warning");
        return;
    }
    
    const cartName = prompt("Enter a name for this cart:");
    if (!cartName) return;
    
    const savedCart = {
        id: Date.now(),
        name: cartName,
        items: [...cart],
        date: new Date().toLocaleDateString(),
        total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
    };
    
    savedCarts.push(savedCart);
    localStorage.setItem("vendorconnect_saved_carts", JSON.stringify(savedCarts));
    
    showAlert(translations[currentLang].cart_saved, "success");
    loadSavedCarts();
}

// Load saved carts
function loadSavedCarts() {
    const savedCartsContainer = $("#saved-carts-list");
    
    if (savedCarts.length === 0) {
        $("#saved-carts").hide();
        return;
    }
    
    $("#saved-carts").show();
    let savedCartsHTML = "";
    
    savedCarts.forEach(savedCart => {
        savedCartsHTML += `
            <div class="saved-cart-item" onclick="loadSavedCart(${savedCart.id})">
                <div class="saved-cart-name">${savedCart.name}</div>
                <div class="saved-cart-info">
                    <span>${savedCart.items.length} items</span>
                    <span>₹${savedCart.total.toFixed(2)}</span>
                    <span>${savedCart.date}</span>
                </div>
            </div>
        `;
    });
    
    savedCartsContainer.html(savedCartsHTML);
}

// Load saved cart
function loadSavedCart(savedCartId) {
    const savedCart = savedCarts.find(sc => sc.id === savedCartId);
    if (!savedCart) return;
    
    cart = [...savedCart.items];
    localStorage.setItem("vendorconnect_cart", JSON.stringify(cart));
    
    updateCartCount();
    loadCartItems();
    updateCartSummary();
    
    showAlert(translations[currentLang].cart_loaded, "success");
}

// Proceed to checkout
function proceedToCheckout() {
    if (cart.length === 0) {
        showAlert("Cart is empty", "warning");
        return;
    }
    
    // Calculate totals
    const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const deliveryFee = subtotal > 500 ? 0 : 50;
    const tax = subtotal * 0.05;
    const total = subtotal + deliveryFee + tax;
    
    // Create order summary
    const orderSummary = `
        <div class="order-summary">
            <h5>${translations[currentLang].order_summary}</h5>
            <div class="order-items">
                ${cart.map(item => `
                    <div class="order-item">
                        <span>${item.name} (${item.quantity} kg)</span>
                        <span>₹${(item.price * item.quantity).toFixed(2)}</span>
                    </div>
                `).join('')}
            </div>
            <div class="order-totals">
                <div>${translations[currentLang].subtotal}: ₹${subtotal.toFixed(2)}</div>
                <div>${translations[currentLang].delivery_fee}: ₹${deliveryFee.toFixed(2)}</div>
                <div>${translations[currentLang].tax}: ₹${tax.toFixed(2)}</div>
                <div class="order-total">${translations[currentLang].total}: ₹${total.toFixed(2)}</div>
            </div>
        </div>
    `;
    
    // Show checkout modal (simplified for now)
    if (confirm("Confirm your order?")) {
        // Clear cart
        cart = [];
        localStorage.setItem("vendorconnect_cart", JSON.stringify(cart));
        
        updateCartCount();
        closeCart();
        
        showAlert(translations[currentLang].checkout_success, "success");
    }
}


// Initialize Bootstrap components
function initBootstrapComponents() {
    // Initialize any Bootstrap components if needed
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    });
}

// Show Vendor Dashboard
function showVendorDashboard(displayName, vendorId) {
    $("#vendor-dashboard").show();
    $("#vendor-name").text(displayName);
    
    // Store current vendor ID for API calls
    window.currentVendorId = vendorId;
    
    // Update header link to point to current dashboard
    $(".app-logo").attr("href", `/${vendorId}/vendor/dashboard`);

    // Load vendor dashboard data
    loadVendorInventory();
    loadPriceComparison();
    loadVendorNotifications();
    loadGroupPurchases();
    loadSavedCarts();

    // Initialize price comparison chart
    initPriceComparisonChart();
    
    // Initialize enhanced suppliers map (will be called by setupSuppliersEventListeners)
    // The map initialization is handled in setupSuppliersEventListeners()
}

// Load vendor inventory
function loadVendorInventory() {
    const inventoryTable = $("#vendor-inventory-table tbody");
    inventoryTable.empty();

    // Show loading indicator
    inventoryTable.append(`
        <tr>
            <td colspan="6" class="text-center">
                <div class="spinner-border spinner-border-sm" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                Loading inventory...
            </td>
        </tr>
    `);

    // Fetch inventory data from API
    $.ajax({
        url: `/api/vendor/${window.currentVendorId}/inventory`,
        method: 'GET',
        success: function(response) {
            inventoryTable.empty();
            
            if (response.success && response.data && response.data.length > 0) {
                response.data.forEach(item => {
                    // Determine status based on quantity
                    let statusClass, statusText;
                    if (item.quantity <= 5) {
                        statusClass = "stock-low";
                        statusText = translations[currentLang].low_stock || "Low Stock";
                    } else if (item.quantity <= 15) {
                        statusClass = "stock-medium";
                        statusText = translations[currentLang].medium_stock || "Medium Stock";
                    } else {
                        statusClass = "stock-ok";
                        statusText = translations[currentLang].ok_stock || "In Stock";
                    }

                    // Format date
                    const lastUpdated = item.last_date ? 
                        new Date(item.last_date).toLocaleDateString() : 
                        new Date(item.date).toLocaleDateString();

                    inventoryTable.append(`
                        <tr>
                            <td>${item.item_name}</td>
                            <td>${item.supplier_name || 'Unknown Supplier'}</td>
                            <td>₹${parseFloat(item.price).toFixed(2)}</td>
                            <td>${item.unit}</td>
                            <td><span class="badge ${statusClass}">${statusText}</span></td>
                            <td>${lastUpdated}</td>
                            <td>
                                <button class="btn btn-sm btn-primary me-1" 
                                        onclick="orderItem('${item.id}', '${item.item_name}')">
                                    <i class="fas fa-shopping-basket"></i>
                                    ${translations[currentLang].order || 'Order'}
                                </button>
                                <button class="add-to-cart-btn btn btn-sm btn-outline-success" 
                                        onclick="addToCart({
                                            id: 'inv_${item.id}',
                                            name: '${item.item_name}',
                                            price: ${parseFloat(item.price)},
                                            supplier: '${item.supplier_name || 'Unknown'}',
                                            unit: '${item.unit}'
                                        })">
                                    <i class="fas fa-cart-plus"></i>
                                    ${translations[currentLang].add_to_cart || 'Add to Cart'}
                                </button>
                            </td>
                        </tr>
                    `);
                });
            } else {
                inventoryTable.append(`
                    <tr>
                        <td colspan="7" class="text-center text-muted">
                            <i class="fas fa-box-open fa-2x mb-2"></i><br>
                            No inventory items found
                        </td>
                    </tr>
                `);
            }
        },
        error: function(xhr, status, error) {
            console.error('Error loading inventory:', error);
            inventoryTable.empty();
            inventoryTable.append(`
                <tr>
                    <td colspan="7" class="text-center text-danger">
                        <i class="fas fa-exclamation-triangle"></i>
                        Failed to load inventory data. Please refresh the page.
                    </td>
                </tr>
            `);
            showAlert('Failed to load inventory data', 'error');
        }
    });
}

// Load price comparison
function loadPriceComparison() {
    const priceTable = $("#price-comparison-table tbody");
    priceTable.empty();

    mockData.priceComparison.forEach(item => {
        const savings = item.marketPrice - item.bestPrice;
        const savingsPercent = Math.round((savings / item.marketPrice) * 100);

        priceTable.append(`
            <tr>
                <td>${item.item}</td>
                <td>₹${item.marketPrice}</td>
                <td>${item.bestSupplier}</td>
                <td>₹${item.bestPrice} <span class="text-success">(-${savingsPercent}%)</span></td>
            </tr>
        `);
    });
}

// Load basic suppliers list (legacy function)
function loadBasicSuppliersList() {
    const suppliersList = $("#suppliers-list");
    suppliersList.empty();

    mockData.suppliers.forEach(supplier => {
        const starsHTML = getStarsHTML(supplier.rating);

        suppliersList.append(`
            <div class="col-md-6 mb-3">
                <div class="supplier-item p-3 bg-white rounded">
                    <h5>${supplier.name}</h5>
                    <div class="d-flex align-items-center mb-2">
                        <div class="stars me-2">${starsHTML}</div>
                        <span>${supplier.rating}</span>
                    </div>
                    <p class="mb-1"><i class="fas fa-map-marker-alt me-2"></i> ${supplier.location} (${supplier.distance})</p>
                    <p class="mb-2"><i class="fas fa-tag me-2"></i> ${supplier.category}</p>
                    <button class="btn btn-sm btn-outline-primary">
                        <i class="fas fa-eye me-1"></i> ${translations[currentLang].view_products}
                    </button>
                </div>
            </div>
        `);
    });
}

// Load vendor notifications
function loadVendorNotifications() {
    const notificationsDiv = $("#vendor-notifications");
    notificationsDiv.empty();

    mockData.vendorNotifications.forEach(notification => {
        let icon = "fa-bell";
        if (notification.type === "price_drop") icon = "fa-tags";
        if (notification.type === "new_supplier") icon = "fa-store";
        if (notification.type === "govt_scheme") icon = "fa-landmark";

        notificationsDiv.append(`
            <div class="notification-item">
                <div class="d-flex align-items-center">
                    <div class="me-3">
                        <i class="fas ${icon} fa-lg"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">${translations[currentLang][notification.type]}</h6>
                        <p class="mb-0">${notification.message}</p>
                        <small class="text-muted">${notification.time}</small>
                    </div>
                </div>
            </div>
        `);
    });
}

// Load group purchases
function loadGroupPurchases() {
    const groupPurchasesDiv = $("#group-purchases");
    groupPurchasesDiv.empty();

    mockData.groupPurchases.forEach(purchase => {
        groupPurchasesDiv.append(`
            <div class="group-purchase-item mb-3">
                <h5 class="mb-2">${translations[currentLang].group_purchase_opportunity}</h5>
                <p class="mb-1"><strong>${translations[currentLang].items_needed}:</strong> ${purchase.items.join(", ")}</p>
                <p class="mb-1"><strong>${translations[currentLang].vendors_joined}:</strong> ${purchase.vendorsJoined}</p>
                <p class="mb-1"><strong>${translations[currentLang].best_supplier}:</strong> ${purchase.bestSupplier}</p>
                <p class="mb-2"><strong>${translations[currentLang].discount}:</strong> ${purchase.discount}</p>
                <div class="d-flex align-items-center justify-content-between">
                    <small class="text-danger"><i class="far fa-clock me-1"></i> ${purchase.deadline}</small>
                    <button class="btn btn-sm btn-primary">
                        ${translations[currentLang].join_group}
                    </button>
                </div>
            </div>
        `);
    });
}

// Helper function to generate HTML for star ratings
function getStarsHTML(rating) {
    let starsHTML = "";
    const fullStars = Math.floor(rating);
    const hasHalfStar = rating % 1 >= 0.5;

    // Add full stars
    for (let i = 0; i < fullStars; i++) {
        starsHTML += '<i class="fas fa-star"></i> ';
    }

    // Add half star if needed
    if (hasHalfStar) {
        starsHTML += '<i class="fas fa-star-half-alt"></i> ';
    }

    // Add empty stars
    const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
    for (let i = 0; i < emptyStars; i++) {
        starsHTML += '<i class="far fa-star"></i> ';
    }

    return starsHTML;
}

// Initialize price comparison chart
function initPriceComparisonChart() {
    const ctx = document.getElementById('priceComparisonChart').getContext('2d');

    // Prepare data from mockData
    const items = mockData.priceComparison.map(item => item.item);
    const marketPrices = mockData.priceComparison.map(item => item.marketPrice);
    const bestPrices = mockData.priceComparison.map(item => item.bestPrice);

    const chart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: items,
            datasets: [
                {
                    label: 'Market Price',
                    backgroundColor: '#FF9E68',
                    data: marketPrices
                },
                {
                    label: 'Best Supplier Price',
                    backgroundColor: '#2EC4B6',
                    data: bestPrices
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: {
                    display: true,
                    text: 'Price Comparison (₹ per kg/unit)'
                },
                legend: {
                    position: 'bottom'
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Price (₹)'
                    }
                }
            }
        }
    });
}

// Setup government schemes event listeners
function setupSchemesEventListeners() {
    // Schemes filter toggle
    $("#schemes-filter-toggle").click(function() {
        const filterPanel = $("#schemes-filter");
        if (filterPanel.is(":visible")) {
            filterPanel.slideUp(300);
            $(this).removeClass("btn-primary").addClass("btn-outline-primary");
        } else {
            filterPanel.slideDown(300);
            $(this).removeClass("btn-outline-primary").addClass("btn-primary");
        }
    });

    // Apply scheme filters
    $("#apply-scheme-filters").click(function() {
        filterSchemes();
    });

    // Clear scheme filters
    $("#clear-scheme-filters").click(function() {
        clearSchemeFilters();
    });

    // Load schemes on page load
    loadGovernmentSchemes();
    
    // View saved schemes
    $("#view-saved-schemes").click(function() {
        showSavedSchemes();
    });
}

// Load government schemes
function loadGovernmentSchemes(filteredSchemes = null) {
    const schemesContainer = $("#schemes-container");
    const schemes = filteredSchemes || governmentSchemes;
    
    if (schemes.length === 0) {
        schemesContainer.html(`
            <div class="text-center py-5">
                <i class="fas fa-search fa-3x text-muted mb-3"></i>
                <h5 class="text-muted">No schemes found</h5>
                <p class="text-muted">Try adjusting your filters to see more schemes.</p>
            </div>
        `);
        return;
    }

    let schemesHTML = "";
    schemes.forEach(scheme => {
        const isSaved = savedSchemes.includes(scheme.id);
        const deadlineDate = new Date(scheme.deadline);
        const today = new Date();
        const daysLeft = Math.ceil((deadlineDate - today) / (1000 * 60 * 60 * 24));
        
        let deadlineClass = "";
        let deadlineText = "";
        
        if (daysLeft < 0) {
            deadlineClass = "expired";
            deadlineText = "Expired";
        } else if (daysLeft <= 30) {
            deadlineClass = "urgent";
            deadlineText = `Urgent - ${daysLeft} days left`;
        } else if (daysLeft <= 60) {
            deadlineClass = "ending";
            deadlineText = `${daysLeft} days left`;
        } else {
            deadlineClass = "active";
            deadlineText = `${daysLeft} days left`;
        }

        schemesHTML += `
            <div class="scheme-card">
                <div class="scheme-status ${scheme.status}">${translations[currentLang][`scheme_${scheme.status}`]}</div>
                
                ${daysLeft <= 30 && daysLeft >= 0 ? `
                    <div class="scheme-deadline ${deadlineClass}">
                        <div class="deadline-text">⚠️ ${deadlineText}</div>
                        <div class="deadline-date">${translations[currentLang].scheme_deadline}: ${scheme.deadline}</div>
                    </div>
                ` : ''}
                
                <div class="scheme-header">
                    <div>
                        <div class="scheme-title">${scheme.title}</div>
                        <span class="scheme-category ${scheme.category}">${translations[currentLang][scheme.category.replace('_', '')] || scheme.category}</span>
                    </div>
                </div>
                
                <div class="scheme-description">${scheme.description}</div>
                
                <div class="scheme-details">
                    <div class="scheme-detail-item">
                        <i class="fas fa-rupee-sign scheme-detail-icon"></i>
                        <span class="scheme-detail-label">${translations[currentLang].scheme_amount}:</span>
                        <span class="scheme-detail-value">${scheme.amount}</span>
                    </div>
                    <div class="scheme-detail-item">
                        <i class="fas fa-calendar-alt scheme-detail-icon"></i>
                        <span class="scheme-detail-label">${translations[currentLang].scheme_duration}:</span>
                        <span class="scheme-detail-value">${scheme.duration}</span>
                    </div>
                    <div class="scheme-detail-item">
                        <i class="fas fa-users scheme-detail-icon"></i>
                        <span class="scheme-detail-label">${translations[currentLang].popularity}:</span>
                        <span class="scheme-detail-value">${scheme.popularity}%</span>
                    </div>
                </div>
                
                <div class="scheme-benefits">
                    <h6><i class="fas fa-gift me-2"></i>${translations[currentLang].scheme_benefits}</h6>
                    <ul class="benefits-list">
                        ${scheme.benefits.map(benefit => `<li>${benefit}</li>`).join('')}
                    </ul>
                </div>
                
                <div class="scheme-eligibility">
                    <h6><i class="fas fa-check-circle me-2"></i>${translations[currentLang].scheme_eligibility}</h6>
                    <div class="eligibility-tags">
                        ${scheme.eligibility.map(elig => `<span class="eligibility-tag">${translations[currentLang][elig.replace('_', '') + '_vendors'] || elig}</span>`).join('')}
                    </div>
                </div>
                
                <div class="scheme-actions">
                    <button class="scheme-btn scheme-btn-primary" onclick="applyForScheme(${scheme.id})">
                        <i class="fas fa-paper-plane"></i>
                        ${translations[currentLang].apply_now}
                    </button>
                    <button class="scheme-btn scheme-btn-secondary" onclick="showSchemeDetails(${scheme.id})">
                        <i class="fas fa-info-circle"></i>
                        ${translations[currentLang].learn_more}
                    </button>
                    <button class="scheme-btn scheme-btn-outline" onclick="toggleSaveScheme(${scheme.id})">
                        <i class="fas ${isSaved ? 'fa-heart' : 'fa-heart-o'}"></i>
                        ${translations[currentLang].save_scheme}
                    </button>
                </div>
            </div>
        `;
    });
    
    schemesContainer.html(schemesHTML);
}

// Filter schemes
function filterSchemes() {
    const category = $("#scheme-category-filter").val();
    const eligibility = $("#scheme-eligibility-filter").val();
    const deadline = $("#scheme-deadline-filter").val();
    const sortBy = $("#scheme-sort-filter").val();
    
    let filteredSchemes = governmentSchemes.filter(scheme => {
        // Category filter
        if (category !== "all" && scheme.category !== category) {
            return false;
        }
        
        // Eligibility filter
        if (eligibility !== "all" && !scheme.eligibility.includes(eligibility)) {
            return false;
        }
        
        // Deadline filter
        if (deadline !== "all") {
            const deadlineDate = new Date(scheme.deadline);
            const today = new Date();
            const daysLeft = Math.ceil((deadlineDate - today) / (1000 * 60 * 60 * 24));
            
            if (deadline === "urgent" && daysLeft > 30) return false;
            if (deadline === "soon" && (daysLeft <= 30 || daysLeft > 60)) return false;
            if (deadline === "ongoing" && daysLeft < 0) return false;
        }
        
        return true;
    });
    
    // Sort schemes
    filteredSchemes.sort((a, b) => {
        switch (sortBy) {
            case "deadline":
                return new Date(a.deadline) - new Date(b.deadline);
            case "benefit":
                const aAmount = parseInt(a.amount.replace(/[^\d]/g, '') || 0);
                const bAmount = parseInt(b.amount.replace(/[^\d]/g, '') || 0);
                return bAmount - aAmount;
            case "popularity":
                return b.popularity - a.popularity;
            default:
                return 0;
        }
    });
    
    loadGovernmentSchemes(filteredSchemes);
}

// Clear scheme filters
function clearSchemeFilters() {
    $("#scheme-category-filter").val("all");
    $("#scheme-eligibility-filter").val("all");
    $("#scheme-deadline-filter").val("all");
    $("#scheme-sort-filter").val("relevance");
    loadGovernmentSchemes();
}

// Apply for scheme
function applyForScheme(schemeId) {
    const scheme = governmentSchemes.find(s => s.id === schemeId);
    if (!scheme) return;
    
    const confirmApply = confirm(`Are you sure you want to apply for "${scheme.title}"?\n\nYou will be redirected to the official application portal.`);
    
    if (confirmApply) {
        // In a real application, this would redirect to the official portal
        showAlert(`${translations[currentLang].scheme_applied}: ${scheme.title}`, "success");
        
        // Simulate application tracking
        const applicationId = "APP" + Date.now();
        const applicationData = {
            id: applicationId,
            schemeId: schemeId,
            schemeTitle: scheme.title,
            applicationDate: new Date().toISOString(),
            status: "Submitted"
        };
        
        // Save application to localStorage
        let applications = JSON.parse(localStorage.getItem("vendorconnect_applications") || "[]");
        applications.push(applicationData);
        localStorage.setItem("vendorconnect_applications", JSON.stringify(applications));
        
        // Open scheme website in new tab
        window.open(scheme.contact.website, '_blank');
    }
}

// Show scheme details
function showSchemeDetails(schemeId) {
    const scheme = governmentSchemes.find(s => s.id === schemeId);
    if (!scheme) return;
    
    const modalHTML = `
        <div class="scheme-modal" id="scheme-modal">
            <div class="scheme-modal-content">
                <div class="scheme-modal-header">
                    <h4>${scheme.title}</h4>
                    <button class="scheme-modal-close" onclick="closeSchemeModal()">×</button>
                </div>
                <div class="scheme-modal-body">
                    <div class="mb-4">
                        <h5>${translations[currentLang].scheme_details}</h5>
                        <p>${scheme.description}</p>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h6>${translations[currentLang].scheme_benefits}</h6>
                            <ul class="benefits-list">
                                ${scheme.benefits.map(benefit => `<li>${benefit}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>${translations[currentLang].scheme_documents}</h6>
                            <ul class="benefits-list">
                                ${scheme.documents.map(doc => `<li>${doc}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h6>${translations[currentLang].scheme_process}</h6>
                        <p>${scheme.process}</p>
                    </div>
                    
                    <div class="mb-4">
                        <h6>${translations[currentLang].scheme_contact_info}</h6>
                        <div class="row">
                            <div class="col-md-4">
                                <strong>${translations[currentLang].scheme_helpline}:</strong><br>
                                ${scheme.contact.helpline}
                            </div>
                            <div class="col-md-4">
                                <strong>${translations[currentLang].scheme_email}:</strong><br>
                                ${scheme.contact.email}
                            </div>
                            <div class="col-md-4">
                                <strong>${translations[currentLang].scheme_website}:</strong><br>
                                <a href="${scheme.contact.website}" target="_blank">${translations[currentLang].scheme_website_link}</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button class="scheme-btn scheme-btn-primary me-2" onclick="applyForScheme(${scheme.id}); closeSchemeModal();">
                            <i class="fas fa-paper-plane"></i>
                            ${translations[currentLang].apply_now}
                        </button>
                        <button class="scheme-btn scheme-btn-secondary" onclick="closeSchemeModal()">
                            <i class="fas fa-times"></i>
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Remove existing modal and add new one
    $(".scheme-modal").remove();
    $("body").append(modalHTML);
    $("#scheme-modal").fadeIn(300);
}

// Close scheme modal
function closeSchemeModal() {
    $("#scheme-modal").fadeOut(300, function() {
        $(this).remove();
    });
}

// Toggle save scheme
function toggleSaveScheme(schemeId) {
    const index = savedSchemes.indexOf(schemeId);
    
    if (index === -1) {
        // Save scheme
        savedSchemes.push(schemeId);
        showAlert(translations[currentLang].scheme_saved, "success");
    } else {
        // Remove scheme
        savedSchemes.splice(index, 1);
        showAlert("Scheme removed from favorites", "info");
    }
    
    localStorage.setItem("vendorconnect_saved_schemes", JSON.stringify(savedSchemes));
    loadGovernmentSchemes();
}

// Show saved schemes
function showSavedSchemes() {
    if (savedSchemes.length === 0) {
        showAlert("No saved schemes found", "info");
        return;
    }
    
    const savedSchemesList = governmentSchemes.filter(scheme => savedSchemes.includes(scheme.id));
    loadGovernmentSchemes(savedSchemesList);
    
    // Update button text to show we're viewing saved schemes
    $("#view-saved-schemes").html('<i class="fas fa-times me-1"></i>Show All');
    $("#view-saved-schemes").off('click').click(function() {
        loadGovernmentSchemes();
        $("#view-saved-schemes").html('<i class="fas fa-heart me-1"></i>Saved');
        $("#view-saved-schemes").off('click').click(function() {
            showSavedSchemes();
        });
    });
}

// Enhanced Nearby Suppliers Variables
let suppliersMap = null;
let userLocation = null;
let mapMarkers = [];
let currentInfoWindow = null;

// Enhanced Suppliers Data
const enhancedSuppliersData = [
    {
        id: 1,
        name: "Fresh Farm Market",
        category: "vegetables",
        rating: 4.8,
        distance: 0.8,
        location: { lat: 19.0170, lng: 72.8478 }, // Dadar
        phone: "+91 98765 43210",
        email: "freshfarm@email.com",
        address: "Dadar West, Mumbai",
        products: ["Tomatoes", "Onions", "Potatoes", "Carrots"],
        deliveryTime: "30-45 min",
        minOrder: "₹200",
        openHours: "6:00 AM - 8:00 PM"
    },
    {
        id: 2,
        name: "Organic Valley",
        category: "fruits",
        rating: 4.6,
        distance: 1.2,
        location: { lat: 19.0596, lng: 72.8295 }, // Bandra
        phone: "+91 98765 43211",
        email: "organicvalley@email.com",
        address: "Bandra West, Mumbai",
        products: ["Apples", "Bananas", "Oranges", "Mangoes"],
        deliveryTime: "45-60 min",
        minOrder: "₹300",
        openHours: "7:00 AM - 9:00 PM"
    },
    {
        id: 3,
        name: "Dairy Delight",
        category: "dairy",
        rating: 4.4,
        distance: 1.8,
        location: { lat: 19.1197, lng: 72.8464 }, // Andheri
        phone: "+91 98765 43212",
        email: "dairydelight@email.com",
        address: "Andheri West, Mumbai",
        products: ["Milk", "Cheese", "Butter", "Yogurt"],
        deliveryTime: "20-30 min",
        minOrder: "₹150",
        openHours: "5:00 AM - 10:00 PM"
    },
    {
        id: 4,
        name: "Grain Guru",
        category: "grains",
        rating: 4.7,
        distance: 2.1,
        location: { lat: 19.0170, lng: 72.8478 }, // Dadar
        phone: "+91 98765 43213",
        email: "grainguru@email.com",
        address: "Dadar East, Mumbai",
        products: ["Rice", "Wheat", "Pulses", "Flour"],
        deliveryTime: "60-90 min",
        minOrder: "₹500",
        openHours: "8:00 AM - 7:00 PM"
    },
    {
        id: 5,
        name: "Meat Masters",
        category: "meat",
        rating: 4.5,
        distance: 2.5,
        location: { lat: 19.0596, lng: 72.8295 }, // Bandra
        phone: "+91 98765 43214",
        email: "meatmasters@email.com",
        address: "Bandra East, Mumbai",
        products: ["Chicken", "Mutton", "Fish", "Eggs"],
        deliveryTime: "40-60 min",
        minOrder: "₹400",
        openHours: "6:00 AM - 9:00 PM"
    }
];

// Add new translation keys for enhanced suppliers
Object.keys(translations).forEach(lang => {
    translations[lang] = {
        ...translations[lang],
        find_suppliers_nearby: lang === 'en' ? "Find and connect with suppliers in your area" : 
                              lang === 'hi' ? "अपने क्षेत्र में आपूर्तिकर्ताओं को खोजें और जुड़ें" : 
                              "तुमच्या क्षेत्रातील पुरवठादार शोधा आणि जोडा",
        my_location: lang === 'en' ? "My Location" : 
                    lang === 'hi' ? "मेरा स्थान" : 
                    "माझे स्थान",
        vegetables: lang === 'en' ? "Vegetables" : 
                   lang === 'hi' ? "सब्जियां" : 
                   "भाजीपाला",
        fruits: lang === 'en' ? "Fruits" : 
               lang === 'hi' ? "फल" : 
               "फळे",
        dairy: lang === 'en' ? "Dairy" : 
              lang === 'hi' ? "दूध" : 
              "दूध",
        meat: lang === 'en' ? "Meat" : 
             lang === 'hi' ? "मांस" : 
             "मांस",
        grains: lang === 'en' ? "Grains" : 
               lang === 'hi' ? "अनाज" : 
               "तृणधान्ये",
        suppliers_list: lang === 'en' ? "Suppliers List" : 
                      lang === 'hi' ? "आपूर्तिकर्ता सूची" : 
                      "पुरवठादार यादी",
        contact_supplier: lang === 'en' ? "Contact" : 
                        lang === 'hi' ? "संपर्क करें" : 
                        "संपर्क साधा",
        view_products: lang === 'en' ? "View Products" : 
                     lang === 'hi' ? "उत्पाद देखें" : 
                     "उत्पादने पहा",
        phone: lang === 'en' ? "Phone" : 
              lang === 'hi' ? "फोन" : 
              "फोन",
        email: lang === 'en' ? "Email" : 
              lang === 'hi' ? "ईमेल" : 
              "ईमेल",
        address: lang === 'en' ? "Address" : 
               lang === 'hi' ? "पता" : 
               "पत्ता",
        products: lang === 'en' ? "Products" : 
                lang === 'hi' ? "उत्पाद" : 
                "उत्पादने",
        delivery_time: lang === 'en' ? "Delivery Time" : 
                     lang === 'hi' ? "डिलीवरी समय" : 
                     "वितरण वेळ",
        min_order: lang === 'en' ? "Min Order" : 
                 lang === 'hi' ? "न्यूनतम ऑर्डर" : 
                 "किमान ऑर्डर",
        open_hours: lang === 'en' ? "Open Hours" : 
                   lang === 'hi' ? "खुलने का समय" : 
                   "उघडण्याची वेळ",
        km_away: lang === 'en' ? "km away" : 
                lang === 'hi' ? "किमी दूर" : 
                "किमी दूर",
        get_directions: lang === 'en' ? "Get Directions" : 
                      lang === 'hi' ? "दिशा प्राप्त करें" : 
                      "दिशा मिळवा"
    };
});

// Setup enhanced suppliers event listeners
function setupSuppliersEventListeners() {
    // Initialize map
    initializeSuppliersMap();
    
    // Filter event listeners
    $("#supplier-category-filter, #supplier-distance-filter, #supplier-rating-filter").on("change", filterSuppliers);
    $("#clear-supplier-filters").on("click", clearSupplierFilters);
    
    // Map controls
    $("#refresh-suppliers").on("click", loadEnhancedSuppliers);
    $("#my-location-btn").on("click", centerMapOnUser);
    $("#zoom-in").on("click", () => {
        if (suppliersMap) {
            suppliersMap.setZoom(suppliersMap.getZoom() + 1);
        }
    });
    $("#zoom-out").on("click", () => {
        if (suppliersMap) {
            suppliersMap.setZoom(suppliersMap.getZoom() - 1);
        }
    });
}

// Initialize Google Maps
function initializeSuppliersMap() {
    const mapElement = document.getElementById("suppliers-map");
    if (!mapElement) return;
    
    // Default center (Mumbai)
    const defaultCenter = { lat: 19.0760, lng: 72.8777 };
    
    suppliersMap = new google.maps.Map(mapElement, {
        center: defaultCenter,
        zoom: 12,
        styles: [
            {
                featureType: "poi",
                elementType: "labels",
                stylers: [{ visibility: "off" }]
            }
        ]
    });
    
    // Get user location
    getUserLocation();
    
    // Load suppliers
    loadEnhancedSuppliers();
}

// Get user location
function getUserLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            (position) => {
                userLocation = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };
                
                // Center map on user location
                suppliersMap.setCenter(userLocation);
                suppliersMap.setZoom(14);
                
                // Add user location marker
                new google.maps.Marker({
                    position: userLocation,
                    map: suppliersMap,
                    icon: {
                        url: "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(`
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="8" fill="#4285F4" stroke="white" stroke-width="2"/>
                                <circle cx="12" cy="12" r="3" fill="white"/>
                            </svg>
                        `),
                        scaledSize: new google.maps.Size(24, 24)
                    },
                    title: "Your Location"
                });
            },
            (error) => {
                console.log("Geolocation error:", error);
                // Use default location
                userLocation = defaultCenter;
            }
        );
    }
}

// Center map on user location
function centerMapOnUser() {
    if (userLocation && suppliersMap) {
        suppliersMap.setCenter(userLocation);
        suppliersMap.setZoom(14);
        showAlert("Map centered on your location", "info");
    } else {
        showAlert("Location not available", "warning");
    }
}

// Load enhanced suppliers
function loadEnhancedSuppliers() {
    // Clear existing markers
    mapMarkers.forEach(marker => marker.setMap(null));
    mapMarkers = [];
    
    // Add markers for each supplier
    enhancedSuppliersData.forEach(supplier => {
        addSupplierMarker(supplier);
    });
    
    // Load suppliers list
    loadEnhancedSuppliersList();
    
    // Update count
    $("#suppliers-count").text(`${enhancedSuppliersData.length} suppliers`);
}

// Add supplier marker to map
function addSupplierMarker(supplier) {
    const marker = new google.maps.Marker({
        position: supplier.location,
        map: suppliersMap,
        title: supplier.name,
        icon: {
            url: "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(`
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="16" cy="16" r="12" fill="#FF6B35" stroke="white" stroke-width="2"/>
                    <text x="16" y="20" text-anchor="middle" fill="white" font-size="12" font-weight="bold">S</text>
                </svg>
            `),
            scaledSize: new google.maps.Size(32, 32)
        }
    });
    
    // Create info window content
    const infoContent = createInfoWindowContent(supplier);
    const infoWindow = new google.maps.InfoWindow({
        content: infoContent,
        maxWidth: 300
    });
    
    // Add click listener
    marker.addListener("click", () => {
        if (currentInfoWindow) {
            currentInfoWindow.close();
        }
        infoWindow.open(suppliersMap, marker);
        currentInfoWindow = infoWindow;
        
        // Highlight corresponding card
        highlightSupplierCard(supplier.id);
    });
    
    mapMarkers.push(marker);
}

// Create info window content
function createInfoWindowContent(supplier) {
    return `
        <div class="map-info-window">
            <div class="info-header">
                <div class="info-title">${supplier.name}</div>
                <div class="info-category">${translations[currentLang][supplier.category] || supplier.category}</div>
            </div>
            <div class="info-body">
                <div class="info-detail">
                    <i class="fas fa-star"></i>
                    <span>${supplier.rating} ${getStarsHTML(supplier.rating)}</span>
                </div>
                <div class="info-detail">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>${supplier.distance} ${translations[currentLang].km_away}</span>
                </div>
                <div class="info-detail">
                    <i class="fas fa-phone"></i>
                    <span>${supplier.phone}</span>
                </div>
                <div class="info-detail">
                    <i class="fas fa-envelope"></i>
                    <span>${supplier.email}</span>
                </div>
                <div class="info-detail">
                    <i class="fas fa-map"></i>
                    <span>${supplier.address}</span>
                </div>
                <div class="info-actions">
                    <button class="info-btn info-btn-primary" onclick="contactSupplier(${supplier.id})">
                        <i class="fas fa-phone me-1"></i>
                        ${translations[currentLang].contact_supplier}
                    </button>
                    <button class="info-btn info-btn-secondary" onclick="viewSupplierProducts(${supplier.id})">
                        <i class="fas fa-eye me-1"></i>
                        ${translations[currentLang].view_products}
                    </button>
                </div>
            </div>
        </div>
    `;
}

// Load enhanced suppliers list
function loadEnhancedSuppliersList() {
    const suppliersList = $("#suppliers-list");
    suppliersList.empty();
    
    enhancedSuppliersData.forEach(supplier => {
        const supplierCard = `
            <div class="supplier-card" data-supplier-id="${supplier.id}" onclick="selectSupplier(${supplier.id})">
                <div class="supplier-header">
                    <div>
                        <div class="supplier-name">${supplier.name}</div>
                        <div class="supplier-category">${translations[currentLang][supplier.category] || supplier.category}</div>
                    </div>
                    <div class="supplier-rating">
                        <div class="stars">${getStarsHTML(supplier.rating)}</div>
                        <div class="rating-text">${supplier.rating}</div>
                    </div>
                </div>
                <div class="supplier-details">
                    <div class="supplier-detail">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${supplier.distance} ${translations[currentLang].km_away}</span>
                    </div>
                    <div class="supplier-detail">
                        <i class="fas fa-phone"></i>
                        <span>${supplier.phone}</span>
                    </div>
                    <div class="supplier-detail">
                        <i class="fas fa-clock"></i>
                        <span>${supplier.deliveryTime}</span>
                    </div>
                </div>
                <div class="supplier-actions">
                    <button class="supplier-btn supplier-btn-primary" onclick="contactSupplier(${supplier.id}); event.stopPropagation();">
                        <i class="fas fa-phone me-1"></i>
                        ${translations[currentLang].contact_supplier}
                    </button>
                    <button class="supplier-btn supplier-btn-secondary" onclick="viewSupplierProducts(${supplier.id}); event.stopPropagation();">
                        <i class="fas fa-eye me-1"></i>
                        ${translations[currentLang].view_products}
                    </button>
                </div>
            </div>
        `;
        suppliersList.append(supplierCard);
    });
}

// Select supplier
function selectSupplier(supplierId) {
    // Remove previous selection
    $(".supplier-card").removeClass("selected");
    
    // Add selection to clicked card
    $(`.supplier-card[data-supplier-id="${supplierId}"]`).addClass("selected");
    
    // Find and center the marker
    const supplier = enhancedSuppliersData.find(s => s.id === supplierId);
    if (supplier && suppliersMap) {
        suppliersMap.setCenter(supplier.location);
        suppliersMap.setZoom(16);
        
        // Trigger marker click
        const marker = mapMarkers.find(m => m.getTitle() === supplier.name);
        if (marker) {
            google.maps.event.trigger(marker, 'click');
        }
    }
}

// Highlight supplier card
function highlightSupplierCard(supplierId) {
    $(".supplier-card").removeClass("selected");
    $(`.supplier-card[data-supplier-id="${supplierId}"]`).addClass("selected");
}

// Filter suppliers
function filterSuppliers() {
    const category = $("#supplier-category-filter").val();
    const distance = $("#supplier-distance-filter").val();
    const rating = $("#supplier-rating-filter").val();
    
    let filteredSuppliers = enhancedSuppliersData;
    
    // Apply category filter
    if (category !== "all") {
        filteredSuppliers = filteredSuppliers.filter(s => s.category === category);
    }
    
    // Apply distance filter
    if (distance !== "all") {
        const maxDistance = parseFloat(distance);
        filteredSuppliers = filteredSuppliers.filter(s => s.distance <= maxDistance);
    }
    
    // Apply rating filter
    if (rating !== "all") {
        const minRating = parseFloat(rating);
        filteredSuppliers = filteredSuppliers.filter(s => s.rating >= minRating);
    }
    
    // Update map markers
    mapMarkers.forEach(marker => marker.setMap(null));
    mapMarkers = [];
    
    filteredSuppliers.forEach(supplier => {
        addSupplierMarker(supplier);
    });
    
    // Update list
    const suppliersList = $("#suppliers-list");
    suppliersList.empty();
    
    filteredSuppliers.forEach(supplier => {
        const supplierCard = `
            <div class="supplier-card" data-supplier-id="${supplier.id}" onclick="selectSupplier(${supplier.id})">
                <div class="supplier-header">
                    <div>
                        <div class="supplier-name">${supplier.name}</div>
                        <div class="supplier-category">${translations[currentLang][supplier.category] || supplier.category}</div>
                    </div>
                    <div class="supplier-rating">
                        <div class="stars">${getStarsHTML(supplier.rating)}</div>
                        <div class="rating-text">${supplier.rating}</div>
                    </div>
                </div>
                <div class="supplier-details">
                    <div class="supplier-detail">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${supplier.distance} ${translations[currentLang].km_away}</span>
                    </div>
                    <div class="supplier-detail">
                        <i class="fas fa-phone"></i>
                        <span>${supplier.phone}</span>
                    </div>
                    <div class="supplier-detail">
                        <i class="fas fa-clock"></i>
                        <span>${supplier.deliveryTime}</span>
                    </div>
                </div>
                <div class="supplier-actions">
                    <button class="supplier-btn supplier-btn-primary" onclick="contactSupplier(${supplier.id}); event.stopPropagation();">
                        <i class="fas fa-phone me-1"></i>
                        ${translations[currentLang].contact_supplier}
                    </button>
                    <button class="supplier-btn supplier-btn-secondary" onclick="viewSupplierProducts(${supplier.id}); event.stopPropagation();">
                        <i class="fas fa-eye me-1"></i>
                        ${translations[currentLang].view_products}
                    </button>
                </div>
            </div>
        `;
        suppliersList.append(supplierCard);
    });
    
    // Update count
    $("#suppliers-count").text(`${filteredSuppliers.length} suppliers`);
}

// Clear supplier filters
function clearSupplierFilters() {
    $("#supplier-category-filter").val("all");
    $("#supplier-distance-filter").val("all");
    $("#supplier-rating-filter").val("all");
    loadEnhancedSuppliers();
}

// Contact supplier
function contactSupplier(supplierId) {
    const supplier = enhancedSuppliersData.find(s => s.id === supplierId);
    if (supplier) {
        showAlert(`Contacting ${supplier.name} at ${supplier.phone}`, "info");
        // In a real app, this would initiate a call or open contact options
    }
}

// View supplier products
function viewSupplierProducts(supplierId) {
    const supplier = enhancedSuppliersData.find(s => s.id === supplierId);
    if (supplier) {
        const productsList = supplier.products.join(", ");
        showAlert(`Products from ${supplier.name}: ${productsList}`, "info");
        // In a real app, this would show a detailed product catalog
    }
} 